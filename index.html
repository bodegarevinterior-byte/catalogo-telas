<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema Integrado de Inventario</title>
  <style>
    body { margin:0; font-family: system-ui, Arial, sans-serif; background:#f4f4f4; color:#333; text-align:center; }
    header { background:#222; color:#fff; padding:16px; font-size:20px; }
    .menu, .muestras, .consultas, .orden { display:none; padding:20px; }
    .active { display:block; }
    .card { display:inline-block; width:200px; height:150px; margin:20px; background:#fff; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,.1); cursor:pointer; transition:transform .2s; }
    .card:hover { transform:scale(1.05); }
    .card h2 { margin-top:50px; }
    input, select { padding:10px; margin:6px 0; font-size:15px; border:1px solid #ccc; border-radius:8px; width:250px; }
    button { padding:10px 14px; margin:10px; border:none; border-radius:8px; background:#1f6feb; color:#fff; cursor:pointer; }
    button:hover { background:#1756b8; }
    #resultadosMuestras, #resultadosInv { display:grid; gap:12px; padding:12px; grid-template-columns: repeat(auto-fill,minmax(180px,1fr)); }
    .card-item { background:#fff; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,.1); overflow:hidden; display:flex; flex-direction:column; }
    .thumb { width:100%; height:150px; object-fit:cover; background:#eee; }
    .content { padding:10px; text-align:left; }
  </style>
</head>
<body>
  <header>Sistema Integrado de Inventario</header>

  <!-- Men칰 principal -->
  <div id="menu" class="menu active">
    <div class="card" onclick="showSection('muestras')"><h2>Muestras</h2></div>
    <div class="card" onclick="showSection('consultas')"><h2>Consultas</h2></div>
    <div class="card" onclick="showSection('orden')"><h2>Orden de Salida</h2></div>
  </div>

  <!-- Muestras -->
  <div id="muestras" class="muestras">
    <h2>Cat치logo de Muestras</h2>
    <a href="formulario.html" class="btn" style="margin-top:10px; display:inline-block;">游늶 Crear formulario de muestras</a>
    <input id="buscadorMuestras" type="text" placeholder="Buscar muestras...">
    <div id="resultadosMuestras"></div>
    <button onclick="goHome()">Men칰 Inicial</button>
  </div>

  <!-- Consultas -->
  <div id="consultas" class="consultas">
    <h2>Consultas de Inventario</h2>
    <input id="buscadorInv" type="text" placeholder="C칩digo o descripci칩n...">
    <div id="resultadosInv"></div>
    <button onclick="goHome()">Men칰 Inicial</button>
  </div>

  <!-- Orden de salida -->
  <div id="orden" class="orden">
    <h2>Crear Orden de Salida</h2>
    <form id="ordenForm">
      <label>Cliente:</label><br>
      <input type="text" id="cliente" required><br>
      <label>Fecha:</label><br>
      <input type="text" id="fecha" readonly><br>
      <label>Usuario:</label><br>
      <select id="usuario">
        <option value="Juan">Juan</option>
        <option value="Ana">Ana</option>
        <option value="Pedro">Pedro</option>
      </select><br>
    </form>
    <button onclick="goHome()">Men칰 Inicial</button>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script>
    // Funciones de navegaci칩n
    function showSection(sec){
      document.getElementById("menu").classList.remove("active");
      document.getElementById("muestras").classList.remove("active");
      document.getElementById("consultas").classList.remove("active");
      document.getElementById("orden").classList.remove("active");
      document.getElementById(sec).classList.add("active");
      if(sec==='orden'){
        document.getElementById('fecha').value = new Date().toISOString().split('T')[0];
      }
    }
    function goHome(){
      document.getElementById("menu").classList.add("active");
      document.getElementById("muestras").classList.remove("active");
      document.getElementById("consultas").classList.remove("active");
      document.getElementById("orden").classList.remove("active");
      document.getElementById('buscadorMuestras').value = '';
      document.getElementById('buscadorInv').value = '';
      document.getElementById('resultadosMuestras').innerHTML = '';
      document.getElementById('resultadosInv').innerHTML = '';
    }

    // === M칩dulo Muestras ===
    const CSV_MUESTRAS = './datos_muestras.csv';
    const resultadosMuestras = document.getElementById('resultadosMuestras');
    const buscadorMuestras = document.getElementById('buscadorMuestras');
    let datosMuestras = [];

    Papa.parse(CSV_MUESTRAS, {
      download:true,
      header:true,
      skipEmptyLines:true,
      complete: function(res){ datosMuestras = res.data; renderMuestras(datosMuestras); }
    });

    function renderMuestras(lista){
      resultadosMuestras.innerHTML='';
      if(!lista.length){ resultadosMuestras.innerHTML='<p>No se encontraron resultados</p>'; return; }
      lista.forEach(item=>{
        const card = document.createElement('div'); card.className='card-item';
        card.innerHTML=`<div class="content"><h3>${item['DESCRIPCION']}</h3><p>C칩digo: ${item['CODIGO']}</p></div>`;
        resultadosMuestras.appendChild(card);
      });
    }

    buscadorMuestras.addEventListener('input', ()=>{
      const t = buscadorMuestras.value.toLowerCase();
      renderMuestras(datosMuestras.filter(d=>
        (d['DESCRIPCION']||'').toLowerCase().includes(t) ||
        (d['CODIGO']||'').toLowerCase().includes(t)
      ));
    });

    // === M칩dulo Consultas ===
    const CSV_INV = './datos_inventario.csv';
    const resultadosInv = document.getElementById('resultadosInv');
    const buscadorInv = document.getElementById('buscadorInv');
    let datosInv = [];

    Papa.parse(CSV_INV,{
      download:true,
      header:true,
      skipEmptyLines:true,
      complete:function(res){ datosInv=res.data; renderInv(datosInv); }
    });

    function renderInv(lista){
      resultadosInv.innerHTML='';
      if(!lista.length){ resultadosInv.innerHTML='<p>No se encontraron resultados</p>'; return; }
      lista.forEach(item=>{
        const imgUrl = `img/${item['N칰mero de art칤culo']}.jpg`;
        const card = document.createElement('div'); card.className='card-item';
        card.innerHTML=`
          <img class="thumb" src="${imgUrl}" alt="${item['Descripci칩n del art칤culo']}">
          <div class="content">
            <h3>${item['Descripci칩n del art칤culo']}</h3>
            <p><b>N칰mero:</b> ${item['N칰mero de art칤culo']}</p>
            <p><b>En stock:</b> ${item['En stock']}</p>
            <p><b>Disponible:</b> ${item['Disponible']}</p>
            <p><b>Ubicaci칩n:</b> ${item['UBICACION']}</p>
          </div>`;
        resultadosInv.appendChild(card);
      });
    }

    buscadorInv.addEventListener('input', ()=>{
      const t = buscadorInv.value.toLowerCase();
      renderInv(datosInv.filter(d=>
        (d['Descripci칩n del art칤culo']||'').toLowerCase().includes(t) ||
        (d['N칰mero de art칤culo']||'').toLowerCase().includes(t)
      ));
    });
  </script>
</body>
</html>
